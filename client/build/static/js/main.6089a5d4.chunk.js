(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(94)},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),o=a(4),i=a(13),s=a(1),u=r.a.createContext(),m=a(2),d=a.n(m),p=a(7),f=a(8),E=a.n(f),h=function(e){var t=e.notification,a=e.dismissNotification;return r.a.createElement("div",{className:"notifications-box__notification"},r.a.createElement("div",{className:"notifications-box__notification-left"},r.a.createElement("h4",null,t.title),r.a.createElement("p",null,t.message)),r.a.createElement("div",{className:"notifications-box__notifications-right"},r.a.createElement("div",{onClick:function(){return e=t._id,void a(e);var e},className:"close-notification"}," x ")))},b=function(e,t){var a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)(function(){!function(){var e=Object(p.a)(d.a.mark(function e(a){var n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:t}},e.next=3,E.a.get("/".concat(a),n);case 3:r=e.sent,l(r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(e)},[e]),c},v=function(){var e=Object(n.useContext)(u),t=e.auth,a=e.setAuth,c=Object(n.useState)(!1),l=Object(s.a)(c,2),i=l[0],m=l[1],f=Object(n.useState)([]),v=Object(s.a)(f,2),k=v[0],g=v[1],x=b("notifications",t.token);Object(n.useEffect)(function(){g(x.filter(function(e){return!1===e.is_read}))},[x]);var w=function(){var e=Object(p.a)(d.a.mark(function e(a){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.patch("/notifications/".concat(a),{is_read:!0},{headers:{Authorization:"Bearer ".concat(t.token)}});case 3:n=e.sent,console.log(n),g(k.filter(function(e){return e._id!==a})),N(k),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),N=function(){if(i&&k.length>0)return r.a.createElement("div",{className:"notifications-box"},r.a.createElement("div",null,r.a.createElement("div",{className:"notifications-box__carat"}),k.map(function(e){return r.a.createElement(h,{key:e._id,dismissNotification:w,notification:e})})))};return r.a.createElement("nav",null,r.a.createElement("div",{className:"container"},r.a.createElement(o.c,{to:"/"},r.a.createElement("h4",null,"TaskApp")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.c,{to:"/dashboard"},"Dashboard")),r.a.createElement("li",null,r.a.createElement("span",{onClick:function(){a({authed:!1,token:""})}},"Sign Out")),r.a.createElement("li",null,r.a.createElement("span",{"aria-label":"notification bell",role:"img",onClick:function(){m(!1===i)}},"\ud83d\udd14 ",k.length>0?r.a.createElement("span",{className:"alert-dot"}):""))),i&&0===k.length&&r.a.createElement("div",{className:"notifications-box"},r.a.createElement("div",{className:"notifications-box__carat"}),r.a.createElement("h4",null,"No Notifications")),N()))},k=function(){return Object(n.useContext)(u).auth.authed?r.a.createElement(v,null):r.a.createElement("nav",null,r.a.createElement("div",{className:"container"},r.a.createElement(o.c,{to:"/"},r.a.createElement("h4",null,"TaskApp")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.c,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(o.c,{to:"/register"},"Register")))))},g=function(){return r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Welcome to TaskApp!"),r.a.createElement("h4",null,"Manage your todo list and get more things done"),r.a.createElement(o.b,{to:"/login",className:"btn btn-link"},"Get Started"))},x=function(e){var t=e.handleUserLogin;return r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(e.target.email.value,e.target.password.value)}(e)}},r.a.createElement("input",{type:"text",name:"email",placeholder:"Email Address"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password"}),r.a.createElement("button",{type:"submit"},"Login"))},w=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useContext)(u).setAuth,m=function(){var t=Object(p.a)(d.a.mark(function t(a,n){var r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a&&n){t.next=4;break}return t.abrupt("return",l("Please enter an email and a password"));case 4:l("");case 5:return t.prev=5,t.next=8,E.a.post("/user/login",{email:a,password:n});case 8:r=t.sent,i({authed:!0,token:r.data.token}),e.history.push("/dashboard"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),l("Something went wrong, please try again");case 16:case"end":return t.stop()}},t,null,[[5,13]])}));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"user-form"},r.a.createElement("h3",null,"Login"),r.a.createElement(x,{handleUserLogin:m}),c&&r.a.createElement("p",{className:"alert-box alert-box__red"},c),r.a.createElement("p",null,"Don't have an account yet? Sign up for one ",r.a.createElement(o.b,{to:"/register"},"here"),".")))},N=function(e){var t=e.handleUserRegistration;return r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),t({firstName:e.target.firstName.value,lastName:e.target.lastName.value,email:e.target.email.value,password:e.target.password.value})}(e)}},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name"}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name"}),r.a.createElement("input",{type:"text",name:"email",placeholder:"Email Address"}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password"}),r.a.createElement("button",{type:"submit"},"Register"))},_=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useContext)(u).setAuth,m=function(){var t=Object(p.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.firstName&&a.lastName&&a.email&&a.password){t.next=4;break}return t.abrupt("return",l("Please fill in all fields"));case 4:l("");case 5:return t.prev=5,t.next=8,E.a.post("/user",a);case 8:n=t.sent,i({authed:!0,token:n.data.token}),e.history.push("/dashboard"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),l("Something went wrong, please try again");case 16:case"end":return t.stop()}},t,null,[[5,13]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"user-form"},r.a.createElement("h3",null,"Register"),r.a.createElement(N,{handleUserRegistration:m}),c&&r.a.createElement("p",{className:"alert-box alert-box__red"},c),r.a.createElement("p",null,"Already have an account? Sign in ",r.a.createElement(o.b,{to:"/login"},"here"),".")))},O=a(25),j=a.n(O),y=a(11),D=a.n(y),C=a(26),S=a.n(C),A=(a(91),function(e){var t=e.task,a=Object(n.useContext)(u).auth,c=Object(n.useState)(!1),l=Object(s.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)(D()(t.due_at).toDate()),f=Object(s.a)(m,2),h=f[0],b=f[1],v=function(){i(!o)},k=function(){var e=Object(p.a)(d.a.mark(function e(n){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<new Date)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,E.a.patch("/tasks/".concat(t._id),{due_at:n},{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:r=e.sent,console.log(r),t.due_at=n,b(n),v(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-list__item"},r.a.createElement("div",null,t.description),r.a.createElement("div",null,t.due_at?r.a.createElement("div",{className:D()(t.due_at).toDate()<new Date?"overdue":""},r.a.createElement("div",{onClick:v},r.a.createElement("span",null,D()(t.due_at).format("MMMM Do YYYY"))),o&&r.a.createElement(S.a,{onDayClick:k,selectedDays:h,initialMonth:D()(t.due_at).toDate(),disabledDays:{before:new Date}})):r.a.createElement("div",null,r.a.createElement("button",{onClick:v},"Set Due Date"),o&&r.a.createElement(S.a,{onDayClick:k,selectedDays:h,disabledDays:{before:new Date}}))),r.a.createElement("div",null,t.completed_at?D()(t.completed_at).format("MMMM Do YYYY"):"-"))}),T=function(e){var t=e.tasks,a=Object(n.useState)("due_at"),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)("asc"),u=Object(s.a)(i,2),m=u[0],d=u[1],p=function(e,t,a){return"due_at"===t&&"asc"===a?e.sort(function(e,t){return D()(e.due_at).toDate()-D()(t.due_at).toDate()}):"due_at"===t&&"desc"===a?e.sort(function(e,t){return D()(t.due_at).toDate()-D()(e.due_at).toDate()}):"description"===t&&"asc"===a?e.sort(function(e,t){return e.description.localeCompare(t.description)}):"description"===t&&"desc"===a?e.sort(function(e,t){return t.description.localeCompare(e.description)}):void 0}(t,l,m),f=function(e){o(e),d("asc"===m?"desc":"asc")};return r.a.createElement("div",{className:"task-list"},r.a.createElement("div",{className:"task-list__header"},r.a.createElement("div",{onClick:function(){return f("description")}},"Description ",r.a.createElement("span",{role:"img"},"\u2195")),r.a.createElement("div",{onClick:function(){return f("due_at")}},"Due Date ",r.a.createElement("span",{role:"img"},"\u2195"),"\ufe0f"),r.a.createElement("div",null,"Completed Date")),function(e){return e.length>0?e.map(function(e){return r.a.createElement(A,{key:e._id,task:e})}):r.a.createElement("div",{style:{padding:"2rem 0.75rem"}},r.a.createElement("h5",null,"You don't have any tasks yet. Create one to get started."))}(p))},M=function(e){e.prevTask;var t=e.createNewTask;return r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),t({description:e.target.description.value})}(e)}},r.a.createElement("input",{type:"text",name:"description",placeholder:"What do you need to get done?"}),r.a.createElement("button",{type:"submit"},"Create Task"))};j.a.setAppElement("#root");var Y=function(){var e=Object(n.useContext)(u).auth,t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],f=i[1],h=b("user",e.token),v=b("tasks",e.token),k=function(){var t=Object(p.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.description){t.next=4;break}return t.abrupt("return",l("Please describe this task"));case 4:l("");case 5:return t.prev=5,t.next=8,E.a.post("/tasks",a,{headers:{Authorization:"Bearer ".concat(e.token)}});case 8:n=t.sent,v.push(n.data),f(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),l("Something went wrong, please try again");case 16:case"end":return t.stop()}},t,null,[[5,13]])}));return function(e){return t.apply(this,arguments)}}(),g=function(){f(!1)};return r.a.createElement("div",{className:"dashboard"},r.a.createElement("h3",null,"Welcome back, ",h.firstName,"!"),r.a.createElement("hr",null),r.a.createElement("h4",null,"Your Tasks"),r.a.createElement(T,{tasks:v}),r.a.createElement("button",{onClick:function(){f(!0)}},"Add Task +"),r.a.createElement(j.a,{isOpen:m,onAfterOpen:function(){},onRequestClose:g,contentLabel:"Create a New Task"},r.a.createElement("button",{onClick:g},"X"),r.a.createElement("div",{className:"user-form"},r.a.createElement("h3",null,"Create a New Task"),r.a.createElement(M,{createNewTask:k}),c&&r.a.createElement("p",{className:"alert-box alert-box__red"},c))))},L=function(){var e=Object(n.useContext)(u).auth;return r.a.createElement(o.a,null,r.a.createElement(k,null),r.a.createElement("div",{className:"container"},r.a.createElement(i.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(g,e)}}),r.a.createElement(i.b,{path:"/login",render:function(t){return e.authed?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(w,t)}}),r.a.createElement(i.b,{path:"/register",render:function(t){return e.authed?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(_,t)}}),r.a.createElement(i.b,{path:"/dashboard",render:function(t){return e.authed?r.a.createElement(Y,t):r.a.createElement(i.a,{to:"/login"})}})))};a(92),a(93);l.a.render(r.a.createElement(function(e){var t=e.children,a=function(e){return null===e?"":e}(localStorage.getItem("authToken")),c={authed:""!==a,token:a},l=Object(n.useState)(c),o=Object(s.a)(l,2),i=o[0],m=o[1];Object(n.useEffect)(function(){localStorage.setItem("authToken",i.token)},[i]);var d={auth:i,setAuth:m};return r.a.createElement(u.Provider,{value:d},t)},null,r.a.createElement(L,null)),document.querySelector("#root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6089a5d4.chunk.js.map